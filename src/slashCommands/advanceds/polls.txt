const { SlashCommandBuilder, EmbedBuilder } = require("discord.js");

module.exports = {
  data: new SlashCommandBuilder()
    .setName("poll")
    .setDescription("Crie uma enquete para o servidor!")
    .addStringOption(option =>
      option.setName("question")
        .setDescription("A pergunta da enquete")
        .setRequired(true))
    .addStringOption(option =>
      option.setName("option1")
        .setDescription("Primeira op√ß√£o")
        .setRequired(true))
    .addStringOption(option =>
      option.setName("option2")
        .setDescription("Segunda op√ß√£o")
        .setRequired(true))
    .addStringOption(option =>
      option.setName("option3")
        .setDescription("Terceira op√ß√£o (opcional)"))
    .addStringOption(option =>
      option.setName("option4")
        .setDescription("Quarta op√ß√£o (opcional)")),

  async execute(interaction) {
    const question = interaction.options.getString("question");
    const option1 = interaction.options.getString("option1");
    const option2 = interaction.options.getString("option2");
    const option3 = interaction.options.getString("option3") || "N/A";
    const option4 = interaction.options.getString("option4") || "N/A";

    const embed = new EmbedBuilder()
      .setTitle(`üó≥ Enquete: ${question}`)
      .setDescription(`
        1Ô∏è‚É£ ${option1}
        2Ô∏è‚É£ ${option2}
        3Ô∏è‚É£ ${option3}
        4Ô∏è‚É£ ${option4}
      `)
      .setColor("#FF6347")
      .setTimestamp();

    const pollMessage = await interaction.reply({ embeds: [embed], fetchReply: true });

    await pollMessage.react("1Ô∏è‚É£");
    await pollMessage.react("2Ô∏è‚É£");
    if (option3 !== "N/A") await pollMessage.react("3Ô∏è‚É£");
    if (option4 !== "N/A") await pollMessage.react("4Ô∏è‚É£");
  },
};
